~ nested_data_test.oker
~ This test specifically verifies that chained indexing for both
~ assignment and access is working correctly after the recent fixes.

say "--- Nested Data Structure Verification Test ---"

let records = [
    {"id": 1, "tags": ["a", "b"]},
    {"id": 2, "tags": ["c", "d"]}
]

say "  -> Initial records: " + str(records)

~ 1. Test Chained Assignment:
~ This line will fail if the parser cannot handle complex assignment targets.
records[0]["tags"][1] = "z"
say "  -> Records after modification: " + str(records)

~ 2. Test Chained Access:
~ This line will fail if the semantic analyzer or VM cannot handle
~ resolving a deeply nested value.
let accessed_item = records[0]["tags"][1]
say "  -> Directly accessed item: " + accessed_item

say "\n--- Verification Test Passed ---"